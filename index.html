<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram File Sync</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }
    
    .container {
      max-width: 800px;
      width: 100%;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      border-radius: 15px;
      background: rgba(30, 30, 30, 0.7);
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      width: 100%;
    }
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      background: linear-gradient(90deg, #4caf50, #8bc34a);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }
    
    .tagline {
      color: #bbbbbb;
      font-size: 1.1rem;
      margin-bottom: 5px;
    }
    
    .status-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 15px;
      font-size: 0.9rem;
      color: #4caf50;
    }
    
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #4caf50;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 0.5; }
      50% { opacity: 1; }
      100% { opacity: 0.5; }
    }
    
    .card {
      background: rgba(30, 30, 30, 0.7);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
    }
    
    .card-title {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      color: #4caf50;
      font-size: 1.3rem;
    }
    
    .card-title i {
      font-size: 1.5rem;
    }
    
    .drop-zone {
      border: 3px dashed #4caf50;
      border-radius: 12px;
      padding: 40px 20px;
      text-align: center;
      transition: all 0.3s ease;
      background: rgba(40, 40, 40, 0.5);
      cursor: pointer;
    }
    
    .drop-zone.active {
      background: rgba(76, 175, 80, 0.2);
      border-color: #ff9800;
      transform: scale(1.02);
    }
    
    .drop-zone p {
      margin-bottom: 20px;
      font-size: 1.1rem;
    }
    
    .custom-upload-btn {
      background: linear-gradient(90deg, #4caf50, #2e7d32);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
    }
    
    .custom-upload-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
    }
    
    .custom-upload-btn:active {
      transform: translateY(1px);
    }
    
    .progress-container {
      margin-top: 30px;
      width: 100%;
    }
    
    .progress-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 0.9rem;
    }
    
    .progress {
      width: 100%;
      height: 12px;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .bar {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, #4caf50, #8bc34a);
      transition: width 0.3s ease;
    }
    
    .downloads-section {
      width: 100%;
    }
    
    .downloads-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .downloads-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .download-item {
      background: rgba(40, 40, 40, 0.7);
      border-radius: 10px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      transition: all 0.3s ease;
    }
    
    .download-item:hover {
      transform: translateY(-5px);
      background: rgba(76, 175, 80, 0.1);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .file-info {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .file-icon {
      width: 40px;
      height: 40px;
      background: rgba(76, 175, 80, 0.2);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }
    
    .file-name {
      font-weight: 600;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      flex: 1;
    }
    
    .file-size {
      color: #bbbbbb;
      font-size: 0.9rem;
    }
    
    .download-btn {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
      border: 1px solid #4caf50;
      padding: 8px 15px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      text-align: center;
      width: 100%;
    }
    
    .download-btn:hover {
      background: rgba(76, 175, 80, 0.3);
      color: white;
    }
    
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(30, 30, 30, 0.9);
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.5s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }
    
    .notification.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    .notification.success {
      border-left: 4px solid #4caf50;
    }
    
    .notification.error {
      border-left: 4px solid #f44336;
    }
    
    .notification i {
      font-size: 1.5rem;
    }
    
    footer {
      margin-top: auto;
      text-align: center;
      padding: 20px;
      color: #bbbbbb;
      font-size: 0.9rem;
      width: 100%;
    }
    
    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }
      
      header {
        padding: 15px;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .card {
        padding: 20px;
      }
      
      .downloads-container {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM16.64 8.8C16.49 10.38 15.84 14.22 15.51 15.99C15.37 16.74 15.09 16.99 14.83 17.02C14.25 17.07 13.81 16.64 13.25 16.27C12.37 15.69 11.87 15.33 11.02 14.77C10.03 14.12 10.67 13.76 11.24 13.18C11.39 13.03 13.95 10.7 14 10.49C14.0069 10.4582 14.006 10.4252 13.9973 10.3938C13.9886 10.3624 13.9724 10.3337 13.95 10.31C13.89 10.26 13.81 10.28 13.74 10.29C13.65 10.31 12.25 11.24 9.52 13.08C9.12 13.35 8.76 13.49 8.44 13.48C8.08 13.47 7.4 13.28 6.89 13.11C6.26 12.91 5.77 12.8 5.79 12.45C5.8 12.33 5.99 12.21 6.41 12.08C9.04 11.11 11.06 10.42 12.57 9.99C15.1 9.3 15.7 9.12 16.11 9.12C16.2 9.12 16.38 9.14 16.5 9.24C16.6 9.33 16.63 9.44 16.64 9.53C16.63 9.61 16.64 9.78 16.64 8.8Z" fill="#4CAF50"/>
        </svg>
        Telegram File Sync
      </h1>
      <p class="tagline">Securely share files between devices via Telegram</p>
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span>Connected to Telegram Bot</span>
      </div>
    </header>
    
    <main>
      <div class="card">
        <div class="card-title">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4C9.11 4 6.6 5.64 5.35 8.04C2.34 8.36 0 10.91 0 14C0 17.31 2.69 20 6 20H19C21.76 20 24 17.76 24 15C24 12.36 21.95 10.22 19.35 10.04ZM14 13V17H10V13H7L12 8L17 13H14Z" fill="#4CAF50"/>
          </svg>
          <h2>Upload Files</h2>
        </div>
        <div class="drop-zone" id="dropZone">
          <p>Drop files here or click to upload</p>
          <button class="custom-upload-btn" onclick="document.getElementById('fileInput').click()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px; vertical-align: middle;">
              <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4C9.11 4 6.6 5.64 5.35 8.04C2.34 8.36 0 10.91 0 14C0 17.31 2.69 20 6 20H19C21.76 20 24 17.76 24 15C24 12.36 21.95 10.22 19.35 10.04ZM14 13V17H10V13H7L12 8L17 13H14Z" fill="white"/>
            </svg>
            Select File
          </button>
          <input type="file" id="fileInput" hidden>
        </div>
        
        <div class="progress-container">
          <div class="progress-label">
            <span>Upload Progress</span>
            <span id="progressPercent">0%</span>
          </div>
          <div class="progress">
            <div class="bar" id="progressBar"></div>
          </div>
        </div>
      </div>
      
      <div class="card downloads-section">
        <div class="downloads-header">
          <div class="card-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4C9.11 4 6.6 5.64 5.35 8.04C2.34 8.36 0 10.91 0 14C0 17.31 2.69 20 6 20H19C21.76 20 24 17.76 24 15C24 12.36 21.95 10.22 19.35 10.04ZM17 15L12 20L7 15H10V9H14V15H17Z" fill="#4CAF50"/>
            </svg>
            <h2>Download Files</h2>
          </div>
          <button id="refreshBtn" class="custom-upload-btn" style="padding: 8px 15px; font-size: 0.9rem;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 5px; vertical-align: middle;">
              <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z" fill="white"/>
            </svg>
            Refresh
          </button>
        </div>
        
        <div class="downloads-container" id="downloadsContainer">
          <!-- Files will be listed here -->
          <div class="download-item">
            <div class="file-info">
              <div class="file-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z" fill="#4CAF50"/>
                </svg>
              </div>
              <div class="file-name">Documentation.pdf</div>
              <div class="file-size">2.4 MB</div>
            </div>
            <button class="download-btn">Download</button>
          </div>
          
          <div class="download-item">
            <div class="file-info">
              <div class="file-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z" fill="#4CAF50"/>
                </svg>
              </div>
              <div class="file-name">Project_Overview.docx</div>
              <div class="file-size">1.1 MB</div>
            </div>
            <button class="download-btn">Download</button>
          </div>
        </div>
      </div>
    </main>
    
    <footer>
      <p>Telegram File Sync System • Secure and Encrypted File Transfer</p>
      <p>All files are transferred through Telegram's secure servers</p>
    </footer>
  </div>
  
  <div class="notification" id="notification">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z" fill="#4CAF50"/>
    </svg>
    <span id="notificationMessage">File uploaded successfully!</span>
  </div>

  <script>
    const botToken = '7743009303:AAEfCdb2kU3xjZHbU-mo_qUbP3wA4aejDRo';
    const chatId = '878604830';
    const fileInput = document.getElementById('fileInput');
    const progressBar = document.getElementById('progressBar');
    const progressPercent = document.getElementById('progressPercent');
    const dropZone = document.getElementById('dropZone');
    const notification = document.getElementById('notification');
    const notificationMessage = document.getElementById('notificationMessage');
    const downloadsContainer = document.getElementById('downloadsContainer');
    const refreshBtn = document.getElementById('refreshBtn');
    let lastUpdateId = 0;
    let filesCache = {};

    // Show notification
    function showNotification(message, isSuccess = true) {
      notificationMessage.textContent = message;
      notification.className = 'notification ' + (isSuccess ? 'success' : 'error');
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Drag and Drop
    ['dragover', 'dragenter'].forEach(event => {
      dropZone.addEventListener(event, e => {
        e.preventDefault();
        dropZone.classList.add('active');
      });
    });

    ['dragleave', 'dragend', 'drop'].forEach(event => {
      dropZone.addEventListener(event, e => {
        e.preventDefault();
        dropZone.classList.remove('active');
      });
    });

    dropZone.addEventListener('drop', e => {
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        uploadFile(files[0]);
      }
    });

    fileInput.addEventListener('change', () => {
      const file = fileInput.files[0];
      if (file) uploadFile(file);
    });

    // Upload file function
    function uploadFile(file) {
      const formData = new FormData();
      formData.append('chat_id', chatId);
      formData.append('document', file);
      
      const xhr = new XMLHttpRequest();
      xhr.open('POST', `https://api.telegram.org/bot${botToken}/sendDocument`);
      
      xhr.upload.onprogress = (e) => {
        if (e.lengthComputable) {
          const percent = Math.round((e.loaded / e.total) * 100);
          progressBar.style.width = percent + '%';
          progressPercent.textContent = percent + '%';
        }
      };
      
      xhr.onload = () => {
        progressBar.style.width = '0%';
        progressPercent.textContent = '0%';
        
        if (xhr.status >= 200 && xhr.status < 300) {
          showNotification('✅ File uploaded to Telegram successfully!');
          // Simulate the file appearing in downloads after upload
          simulateFileDownload(file.name, Math.round(file.size / 1024) + ' KB');
        } else {
          showNotification('❌ Error uploading file to Telegram', false);
        }
      };
      
      xhr.onerror = () => {
        showNotification('❌ Network error while uploading file', false);
      };
      
      xhr.send(formData);
    }

    // Simulate file download in UI
    function simulateFileDownload(fileName, fileSize) {
      const downloadItem = document.createElement('div');
      downloadItem.className = 'download-item';
      downloadItem.innerHTML = `
        <div class="file-info">
          <div class="file-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z" fill="#4CAF50"/>
            </svg>
          </div>
          <div class="file-name">${fileName}</div>
          <div class="file-size">${fileSize}</div>
        </div>
        <button class="download-btn">Download</button>
      `;
      
      // Prepend to show at the top
      downloadsContainer.insertBefore(downloadItem, downloadsContainer.firstChild);
      
      // Add click handler for the download button
      downloadItem.querySelector('.download-btn').addEventListener('click', function() {
        showNotification(`⬇️ Downloading ${fileName}...`);
      });
    }

    // Polling Telegram for new files
    async function pollTelegram() {
      try {
        const res = await fetch(`https://api.telegram.org/bot${botToken}/getUpdates?offset=${lastUpdateId + 1}`);
        const data = await res.json();
        
        if (data.result && data.result.length > 0) {
          data.result.forEach(msg => {
            lastUpdateId = msg.update_id;
            
            if (msg.message?.document) {
              const fileId = msg.message.document.file_id;
              const fileName = msg.message.document.file_name || `file_${Date.now()}`;
              const fileSize = formatFileSize(msg.message.document.file_size);
              
              // Add to downloads if it's a new file
              if (!filesCache[fileId]) {
                filesCache[fileId] = true;
                simulateFileDownload(fileName, fileSize);
                showNotification(`📥 New file available: ${fileName}`);
              }
            }
          });
        }
      } catch (err) {
        console.log('Error polling Telegram:', err);
      }
    }

    // Format file size
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // Refresh button handler
    refreshBtn.addEventListener('click', function() {
      showNotification('🔄 Checking for new files...');
      pollTelegram();
    });

    // Initialize polling every 5 seconds
    setInterval(pollTelegram, 5000);
    
    // Initialize with sample files
    simulateFileDownload('Presentation.pptx', '3.2 MB');
    simulateFileDownload('Budget_2023.xlsx', '456 KB');
  </script>
</body>
</html>
